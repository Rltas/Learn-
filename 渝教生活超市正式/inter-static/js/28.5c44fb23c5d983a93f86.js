webpackJsonp([28],{359:function(n,e,t){t(721);var o=t(76)(t(640),t(812),"data-v-2cfd430e",null);n.exports=o.exports},399:function(n,e,t){n.exports={default:t(401),__esModule:!0}},400:function(n,e,t){"use strict";e.__esModule=!0;var o=t(399),i=function(n){return n&&n.__esModule?n:{default:n}}(o);e.default=function(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return(0,i.default)(n)}},401:function(n,e,t){t(149),t(403),n.exports=t(16).Array.from},402:function(n,e,t){"use strict";var o=t(34),i=t(77);n.exports=function(n,e,t){e in n?o.f(n,e,i(0,t)):n[e]=t}},403:function(n,e,t){"use strict";var o=t(41),i=t(29),a=t(84),c=t(162),r=t(161),s=t(85),d=t(402),l=t(160);i(i.S+i.F*!t(163)(function(n){Array.from(n)}),"Array",{from:function(n){var e,t,i,u,p=a(n),f="function"==typeof this?this:Array,b=arguments.length,h=b>1?arguments[1]:void 0,g=void 0!==h,v=0,m=l(p);if(g&&(h=o(h,b>2?arguments[2]:void 0,2)),void 0==m||f==Array&&r(m))for(e=s(p.length),t=new f(e);e>v;v++)d(t,v,g?h(p[v],v):p[v]);else for(u=m.call(p),t=new f;!(i=u.next()).done;v++)d(t,v,g?c(u,h,[i.value,v],!0):i.value);return t.length=v,t}})},640:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t(400),i=t.n(o);e.default={data:function(){return{tabList:["未使用","已使用","已过期"],activeIndex:0,couponList:[],loading:!1,currentPage:1,totalPage:1,desTitle:""}},watch:{activeIndex:{handler:function(n){switch(n){case 0:this.desTitle="暂无未使用优惠券";break;case 1:this.desTitle="暂无已使用优惠券";break;case 2:this.desTitle="暂无已过期优惠券"}},immediate:!0}},created:function(){this.getCouponList()},mounted:function(){this.$refs.coupon.addEventListener("scroll",this.loadMore,!1)},destroyed:function(){this.$refs.coupon&&this.$refs.coupon.removeEventListener("scroll",this.loadMore,!1)},methods:{changeTab:function(n){this.activeIndex=n,this.currentPage=1,this.couponList=[],this.getCouponList()},toPay:function(n){0==n.status&&(this.$storage.setCouponTitle_storage(n.name),this.$storage.setConponSpecId_storage(n.specid),this.$storage.setCouponId_storage(n.id),this.$router.push({path:"/couponPay",query:{id:n.goodsid}}))},getCouponList:function(){var n=this,e={currentPage:this.currentPage,status:this.activeIndex};0==this.couponList.length?this.$generalTool.toastLoading():this.loading=!0,this.api.post("getMyCoupon",e).then(function(e){if(n.$toast.clear(),n.loading=!1,e&&200==e.code){var t;(t=n.couponList).push.apply(t,i()(e.obj.couponList)),n.totalPage=e.obj.totalPage}})},loadMore:function(){var n=this.$refs.coupon;n.offsetHeight+n.scrollTop>=n.scrollHeight-5&&++this.currentPage<=this.totalPage&&this.getCouponList()}}}},675:function(n,e,t){e=n.exports=t(324)(),e.push([n.i,"\n#coupon[data-v-2cfd430e] {\n  height: 100%;\n}\n#coupon header[data-v-2cfd430e] {\n  width: 100%;\n  height: .56rem;\n  background: #fff;\n  color: #666;\n  position: fixed;\n  top: 0;\n  z-index: 6;\n}\n#coupon header ul[data-v-2cfd430e] {\n  height: inherit;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n}\n#coupon header ul li[data-v-2cfd430e] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  height: .18rem;\n  text-align: center;\n  margin-top: .19rem;\n}\n#coupon header ul li span[data-v-2cfd430e] {\n  display: inline-block;\n  height: .56rem;\n  line-height: .54rem;\n  box-sizing: border-box;\n  margin-top: -0.19rem;\n}\n#coupon header ul li .tab-active[data-v-2cfd430e] {\n  border-bottom: .02rem solid #FF8B58;\n  color: #FF8B58;\n}\n#coupon header ul li[data-v-2cfd430e]:not(:last-child) {\n  border-right: .01rem solid #ccc;\n}\n#coupon .coupon-container[data-v-2cfd430e] {\n  width: 100%;\n  height: 100%;\n  padding-top: .66rem;\n  box-sizing: border-box;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n#coupon .coupon-container .coupon-details[data-v-2cfd430e] {\n  width: 3.45rem;\n  margin: 0 auto;\n  margin-bottom: .1rem;\n  background: #fff;\n  height: 1rem;\n  border-radius: .05rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n          justify-content: space-between;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n#coupon .coupon-container .coupon-details .content[data-v-2cfd430e] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  height: inherit;\n  padding: .07rem .05rem .07rem .07rem;\n  border-radius: .05rem 0 0 .05rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  color: #666;\n}\n#coupon .coupon-container .coupon-details .content img[data-v-2cfd430e] {\n  width: .86rem;\n  height: .86rem;\n  margin-right: .1rem;\n}\n#coupon .coupon-container .coupon-details .content .use-info[data-v-2cfd430e] {\n  font-size: .12rem;\n  width: 1.3rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n          justify-content: space-between;\n  padding: .03rem 0 .04rem 0;\n  box-sizing: border-box;\n}\n#coupon .coupon-container .coupon-details .content .use-info .coupon-title[data-v-2cfd430e] {\n  font-size: .14rem;\n  font-weight: 600;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n  max-height: .3rem;\n}\n#coupon .coupon-container .coupon-details .content .use-info .indate[data-v-2cfd430e] {\n  display: inline-block;\n  padding: .04rem 0;\n  width: .7rem;\n  text-align: center;\n  border: .01rem solid #FF543D;\n  color: #FF543D;\n  border-radius: .12rem;\n}\n#coupon .coupon-container .coupon-details .tip[data-v-2cfd430e] {\n  -webkit-box-flex: 0;\n  -webkit-flex: 0 0 1rem;\n          flex: 0 0 1rem;\n  height: inherit;\n  border-radius: 0 .05rem .05rem 0;\n  background: -webkit-linear-gradient(313deg, #ffb347 6%, #ff533d 97%);\n  background: linear-gradient(137deg, #ffb347 6%, #ff533d 97%);\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  color: #fff;\n  position: relative;\n  overflow: hidden;\n}\n#coupon .coupon-container .coupon-details .tip .price[data-v-2cfd430e] {\n  font-size: .28rem;\n  font-weight: 600;\n}\n#coupon .coupon-container .coupon-details .tip .small-price[data-v-2cfd430e] {\n  font-size: .22rem;\n}\n#coupon .coupon-container .coupon-details .tip .rotate[data-v-2cfd430e] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  background: #FFD763;\n  -webkit-transform: rotate(45deg) scale(0.8);\n          transform: rotate(45deg) scale(0.8);\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  position: absolute;\n  right: -0.26rem;\n  top: .08rem;\n  padding: 0 .2rem;\n  line-height: .12rem;\n  font-size: .12rem;\n}\n#coupon .coupon-container .coupon-details .tip .rotate span[data-v-2cfd430e] {\n  color: #FF5B3E;\n}\n#coupon .coupon-container .coupon-details .tip .rotate span[data-v-2cfd430e]:nth-child(1),\n#coupon .coupon-container .coupon-details .tip .rotate span[data-v-2cfd430e]:nth-child(3) {\n  line-height: .12rem;\n  padding-top: .06rem;\n  color: #fff;\n  box-sizing: border-box;\n}\n#coupon .coupon-container .coupon-details .tip .rotate-disabled[data-v-2cfd430e] {\n  background: #ccc;\n}\n#coupon .coupon-container .coupon-details .tip .rotate-disabled span[data-v-2cfd430e] {\n  color: #fff;\n}\n#coupon .coupon-container .coupon-details .tip-disabled[data-v-2cfd430e] {\n  background: #999;\n}\n#coupon .coupon-container .coupon-details .split-line[data-v-2cfd430e] {\n  position: relative;\n  -webkit-box-flex: 0;\n  -webkit-flex: 0 0 0;\n          flex: 0 0 0;\n  height: inherit;\n}\n#coupon .coupon-container .coupon-details .split-line[data-v-2cfd430e]::before,\n#coupon .coupon-container .coupon-details .split-line[data-v-2cfd430e]::after {\n  content: '';\n  position: absolute;\n  width: .1rem;\n  height: .05rem;\n  background: #eee;\n  left: -0.05rem;\n  z-index: 1;\n}\n#coupon .coupon-container .coupon-details .split-line[data-v-2cfd430e]::before {\n  border-radius: 0 0 .05rem .05rem;\n  top: 0;\n}\n#coupon .coupon-container .coupon-details .split-line[data-v-2cfd430e]::after {\n  border-radius: .05rem .05rem 0 0;\n  bottom: 0;\n}\n",""])},721:function(n,e,t){var o=t(675);"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);t(325)("1498755c",o,!0)},812:function(n,e){n.exports={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{ref:"coupon",attrs:{id:"coupon"}},[t("header",[t("ul",n._l(n.tabList,function(e,o){return t("li",{key:o},[t("span",{class:{"tab-active":n.activeIndex==o},on:{click:function(e){n.changeTab(o)}}},[n._v(n._s(e))])])}))]),n._v(" "),0!=n.couponList.length?t("div",{staticClass:"coupon-container"},[n._l(n.couponList,function(e,o){return t("div",{key:o,staticClass:"coupon-details",on:{click:function(t){n.toPay(e)}}},[t("div",{staticClass:"content"},[t("img",{attrs:{src:e.goodsUrl,alt:""}}),n._v(" "),t("div",{staticClass:"use-info"},[t("span",{staticClass:"coupon-title"},[n._v(n._s(e.name))]),n._v(" "),t("span",{staticClass:"use-limitTime"},[n._v(n._s(e.endTime))]),n._v(" "),[0==e.status?t("span",{staticClass:"indate"},[n._v("立即使用")]):n._e(),n._v(" "),1==e.status?t("span",{staticClass:"past-due"},[n._v("已使用")]):n._e(),n._v(" "),2==e.status?t("span",{staticClass:"been-used"},[n._v("已过期")]):n._e()]],2)]),n._v(" "),t("div",{staticClass:"split-line"}),n._v(" "),t("div",{class:["tip",{"tip-disabled":0!=e.status}]},[t("span",{staticClass:"flag"},[n._v("￥")]),n._v(" "),t("span",{class:["price",{"small-price":e.price.toString().length>=5}]},[n._v(n._s(n.$numShow(e.price)))]),n._v(" "),t("div",{class:["rotate",{"rotate-disabled":0!=e.status}]},[t("span",[n._v("*")]),n._v(" "),t("span",[n._v("优惠券")]),n._v(" "),t("span",[n._v("*")])])])])}),n._v(" "),t("van-loading",{directives:[{name:"show",rawName:"v-show",value:n.loading,expression:"loading"}],staticStyle:{"text-align":"center"},attrs:{size:"24px"}},[n._v("加载中...")])],2):t("van-empty",{attrs:{description:n.desTitle}})],1)},staticRenderFns:[]}}});